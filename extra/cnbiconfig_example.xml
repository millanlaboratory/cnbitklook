<?xml version="1.0" encoding='UTF-8'?>
<!-- 2010-11-19  Michele Tavella <michele.tavella@epfl.ch> -->
<cnbiconfig>
	<!-- Subject Block -->
	<subject>
		<id>b3</id>
		<age>25</age>
	</subject>

	<!-- Experimenter -->
	<recording>
		<experimenter>mtavella</experimenter>
		<experiment>MI_training</experiment>
		<project>TOBI</project>
		<location>SUVA</location>
		<date>2010.09.12</date>
	</recording>

	<!-- Protocol Block -->
	<protocol>
		<mi_offline>
			<scenes>
				<wait>1000.00</wait>
				<begin>5000.00</begin>
				<end>5000.00</end>
			</scenes>
			<trial>
				<waitmin>3000.00</waitmin>
				<waitmax>4500.00</waitmax>
				<fixation>3000.00</fixation>
				<cue>1000.00</cue>
				<cfeedback>4000.00</cfeedback>
				<boom>1000.00</boom>
			</trial>
		</mi_offline>
		<errp>
			<scenes>
				<begin>5000.00</begin>
				<end>5000.00</end>
			</scenes>
			<trial>
				<waitmin>2000.00</waitmin>
				<waitmax>3500.00</waitmax>
				<fixation>2000.00</fixation>
				<cue>2000.00</cue>
				<cfeedback>2000.00</cfeedback>
				<step>2500.00</step>
				<waitundo>1000.00</waitundo>
			</trial>
		</errp>
	</protocol>
	
	<!-- Options Block -->
	<options>
		<fes>
			<dev>/dev/ttyUSB0</dev>
			<async>false</async>
			<orthosis>false</orthosis>
		</fes>
		<robotino>
			<address>10.66.99.130:6120</address>
			<sharedcontrol>true</sharedcontrol>
		</robotino>
		<qw>
			<prototype>browser</prototype>
			<crash>true</crash>
		</qw>
	</options>
	
	<!-- Offline Blocks -->
	<offline>
		<mi description="Offline MI"> <!-- This is a Block -->
			<taskset ttype="mi_rhlh"> <!-- This is a Taskset -->
				<trials>
					<mi_hand_left>15</mi_hand_left>
					<mi_hand_right>15</mi_hand_right>
				</trials>
			</taskset>
			<taskset ttype="mi_rhbf">
				<trials>
					<mi_hand_right>15</mi_hand_right>
					<mi_both_feet>15</mi_both_feet>
				</trials>
			</taskset>
			<taskset ttype="mi_bflh">
				<trials>
					<mi_both_feet>15</mi_both_feet>
					<mi_hand_left>15</mi_hand_left>
				</trials>
			</taskset>
			<taskset ttype="mi_rlsf">
				<trials>
					<mi_both_feet>15</mi_both_feet>
					<mi_hand_left>15</mi_hand_left>
					<mi_hand_right>15</mi_hand_right>
					<mi_rest>15</mi_rest>
				</trials>
			</taskset>
			<taskset ttype="mi_rlbf">
				<trials>
					<mi_both_feet>15</mi_both_feet>
					<mi_hand_left>15</mi_hand_left>
					<mi_hand_right>15</mi_hand_right>
				</trials>
			</taskset>
			<granularity>16</granularity>
			<threshold>0.85</threshold>
			<viscosity>0.05</viscosity>
		</mi>
		<errp description="Offline ErrPs (6 bars, 240 trials)">
			<taskset ttype="errp">
				<trials>
					<errp_detected>0</errp_detected>
					<errp_notdetected>0</errp_notdetected>
				</trials>
			</taskset>
			<squares>6</squares>
			<trials>240</trials>
		</errp>
	</offline>
	
	<!-- Online Block -->
	<online>
		<check description="Loop check">
			<taskset ttype="mi_rhlh" ctype="check" classifier="kmi0">
				<threshold>
					<mi_hand_right>0.65</mi_hand_right>
					<mi_hand_left>0.95</mi_hand_left>
				</threshold>
				<trials>
					<mi_hand_right>150</mi_hand_right>
					<mi_hand_left>250</mi_hand_left>
				</trials>
			</taskset>
			<integration>0.96</integration>
		</check>
		<mi description="Online MI">
			<taskset ttype="mi_rhlh" ctype="mi" classifier="kmi0">
				<threshold>
					<mi_hand_right>0.65</mi_hand_right>
					<mi_hand_left>0.95</mi_hand_left>
				</threshold>
				<trials>
					<mi_hand_right>150</mi_hand_right>
					<mi_hand_left>250</mi_hand_left>
				</trials>
			</taskset>
			<integration>0.96</integration>
		</mi>
		<errp description="Online ErrPs (6 bars, 240 trials)">
			<taskset ttype="errp" ctype="mi" classifier="kerrp0">
				<trials>
					<errp_detected>0</errp_detected>
					<errp_notdetected>0</errp_notdetected>
				</trials>
			</taskset>
			<squares>6</squares>
			<trials>240</trials>
		</errp>
		<mierrp  description="Online MI+ErrPs">
			<taskset ttype="mi_rhlh" ctype="mi" classifier="kmi0">
				<threshold>
					<mi_hand_left>0.85</mi_hand_left>
					<mi_hand_right>0.92</mi_hand_right>
				</threshold>
				<trials>
					<mi_hand_left>15</mi_hand_left>
					<mi_hand_right>15</mi_hand_right>
				</trials>
				<bias>
					<mi_hand_left>0.10</mi_hand_left>
					<mi_hand_right>0.90</mi_hand_right>
				</bias>
				<integration>
					<mi_hand_left>0.96</mi_hand_left>
					<mi_hand_right>0.92</mi_hand_right>
				</integration>
			</taskset>
			<taskset ttype="errp" ctype="errp" classifier="kerrp0">
				<squares>6</squares>
				<trials>240</trials>
			</taskset>
		</mierrp>
	</online>

	<!-- Classifiers Block -->
	<classifier>
		<kmi0>
			<description>Yesterday</description>
			<filename>b3_mi_20091204.mat</filename>
		</kmi0>
		<kmi1>
			<description>Today</description>
			<filename>b3_mi_20091202.mat</filename>
		</kmi1>
		<kerrp0>
			<description>ErrP_classifier</description>
			<filename>b3_errp_20091202.mat</filename>
		</kerrp0>
	</classifier>


	<!-- Standard classifier type list -->
	<classifiers>
		<check description="Fake NDF monitor classifier">
			<tobi>
				<icvalue>ValueProb</icvalue>
				<iclabel>LabelBiosig</iclabel>
			</tobi>
			<ndf>
				<function>ndf_monitor</function>
				<pipename>/pipe0</pipename>
				<id>/acquisition</id>
				<ic>/feedback</ic>
			</ndf>
		</check>
		<mi description="Standard MI">
			<tobi>
				<icvalue>ValueProb</icvalue>
				<iclabel>LabelBiosig</iclabel>
			</tobi>
			<ndf>
				<function>ndf_mi</function>
				<pipename>/pipe1</pipename>
				<id>/acquisition</id>
				<ic>/mi_online</ic>
			</ndf>
		</mi>
		<errp description="Standards ErrP">
			<tobi>
				<icvalue>ValueProb</icvalue>
				<iclabel>LabelBiosig</iclabel>
			</tobi>
			<ndf>
				<function>ndf_errp</function>
				<pipename>/pipe2</pipename>
				<id>/acquisition</id>
				<ic>/errp_online</ic>
			</ndf>
		</errp>
	</classifiers>


	<!-- Standard Task List -->
	<tasksets>
		<mi_rlsf description="Motor Imagery 4: Right, Left, Rest, Feet">
			<class id="0" key="mi_hand_right"/>
			<class id="1" key="mi_hand_left"/>
			<class id="2" key="mi_rest"/>
			<class id="3" key="mi_both_feet"/>
		</mi_rlsf>
		<mi_rlbf description="Motor Imagery 3: Right, Left, Feet">
			<class id="0" key="mi_hand_right"/>
			<class id="1" key="mi_hand_left"/>
			<class id="2" key="mi_both_feet"/>
		</mi_rlbf>
		<mi_rhlh description="Motor Imagery 2: Right, Left">
			<class id="0" key="mi_hand_right"/>
			<class id="1" key="mi_hand_left"/>
		</mi_rhlh>
		<mi_rhbf description="Motor Imagery 2: Right, Feet">
			<class id="0" key="mi_hand_right"/>
			<class id="1" key="mi_both_feet"/>
		</mi_rhbf>
		<mi_bflh description="Motor Imagery 2: Left, Feet">
			<class id="0" key="mi_both_feet"/>
			<class id="1" key="mi_hand_left"/>
		</mi_bflh>
		<mi_bhbf description="Motor Imagery 2: Hands, Feet">
			<class id="0" key="mi_both_hands"/>
			<class id="1" key="mi_both_feet"/>
		</mi_bhbf>
		<mi_bfbh description="Motor Imagery 2: Feet, Hands">
			<class id="0" key="mi_both_feet"/>
			<class id="1" key="mi_both_hands"/>
		</mi_bfbh>
		<errp description="Error Potentials">
			<class id="0" key="errp_detected"/>
			<class id="1" key="errp_notdetected"/>
		</errp> 
	</tasksets>
	
	<!-- Standard Task List -->
	<tasks>
		<mi_hand_right>
			<description>Right_Hand_MI</description>
			<gdfevent>0x0302</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_hand_right>
		<mi_hand_left>
			<description>Left_Hand_MI</description>
			<gdfevent>0x0301</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_hand_left>
		<mi_both_hands>
			<description>Both_Hands_MI</description>
			<gdfevent>0x0305</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_both_hands>
		<mi_both_feet>
			<description>Both_Feet_MI</description>
			<gdfevent>0x0303</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_both_feet>
		<mi_rest>
			<description>Rest_MI</description>
			<gdfevent>0x030f</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_rest>
		<mi_tongue>
			<description>Tongue_MI</description>
			<gdfevent>0x0304</gdfevent>
			<hwtrigger>1</hwtrigger>
		</mi_tongue>
		<errp_detected>
			<description>ErrP_Detected</description>
			<gdfevent>0x030b</gdfevent>
			<hwtrigger>2</hwtrigger>
		</errp_detected>
		<errp_notdetected>
			<description>ErrP_NotDetected</description>
			<gdfevent>0x030c</gdfevent>
			<hwtrigger>2</hwtrigger>
		</errp_notdetected>
		<onset_true>
			<description>MI_Onset_Detected</description>
			<gdfevent>0x0010</gdfevent>
			<hwtrigger>3</hwtrigger>
		</onset_true>
		<onset_false>
			<description>MI_Onset_NotDetected</description>
			<gdfevent>0x0011</gdfevent>
			<hwtrigger>3</hwtrigger>
		</onset_false>
	</tasks>
	
	<!-- Standard Events List -->
	<events>
		<gdfevents>
			<inc>0x030a</inc>
			<trial>0x0300</trial>
			<trialoff>0x8300</trialoff>
			<cfeedback>0x030d</cfeedback>
			<cfeedbackoff>0x830d</cfeedbackoff>
			<targethit>0x0381</targethit>
			<targetmiss>0x0382</targetmiss>
			<beep>0x0311</beep>
			<cueundef>0x030f</cueundef>
			<wait>0x0001</wait>
			<fixation>0x0001</fixation>
			<errp>
				<start>0x0001</start>
				<stop>0x0001</stop>
				<correct>0x0001</correct>
				<error>0x0001</error>
				<left>0x0001</left>
				<right>0x0001</right>
			</errp>
		</gdfevents>
		<hwtriggers>
			<inc>255</inc>
			<trial>255</trial>
			<trialoff>255</trialoff>
			<cfeedback>255</cfeedback>
			<cfeedbackoff>255</cfeedbackoff>
			<targethit>255</targethit>
			<targetmiss>255</targetmiss>
			<beep>255</beep>
			<cueundef>255</cueundef>
			<wait>255</wait>
			<fixation>255</fixation>
			<errp>
				<start>17</start>
				<stop>18</stop>
				<correct>4</correct>
				<error>5</error>
				<left>2</left>
				<right>3</right>
			</errp>
		</hwtriggers>
	</events>

	<!-- Configuration Block -->
	<configuration>
		<clloop>
			<nameserver>127.0.0.1:8000</nameserver>
		</clloop>
		<cptriggerlpt> 
			<forcelpt>false</forcelpt>
			<port>-1</port>
			<duration>15</duration>
			<level>0</level>
		</cptriggerlpt>
		<csmrengine>
			<caption>CnbiTk</caption>
			<width>800</width>
			<height>600</height>
			<x>0</x>
			<y>0</y>
			<bpp>24</bpp>
		</csmrengine>
	</configuration>
</cnbiconfig>
